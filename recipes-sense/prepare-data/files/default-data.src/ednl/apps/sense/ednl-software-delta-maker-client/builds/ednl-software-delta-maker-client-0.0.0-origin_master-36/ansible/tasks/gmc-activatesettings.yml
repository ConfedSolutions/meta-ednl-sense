---
- name: GMC - check if settings file exists in current/etc
  stat:
    path: /home/app/sense/ednl-gatestate-module-controller/current/etc/settings
  register: settingsfile

- name: GMC - Copy previous settings file(if it exsists)
  copy:
    src: /home/app/sense/ednl-gatestate-module-controller/current/etc/settings
    dest: /home/app/sense/ednl-gatestate-module-controller/tmp/etc/settings
  when:
    - settingsfile.stat.exists == true

- name: GMC - Moves settings file for connection to test environment
  copy:
    src: "/home/app/sense/ednl-gatestate-module-controller/tmp/etc/settings.example"
    dest: "/home/app/sense/ednl-gatestate-module-controller/tmp/etc/settings"
  when:
    - target == "test"
    - settingsfile.stat.exists == false
